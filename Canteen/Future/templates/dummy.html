@admin.register(Employee)
class EmployeeAdmin(admin.ModelAdmin):
    list_display = (
        'name', 'email', 'department', 'masked_pin', 'wallet_amount',
        'photo_preview', 'qr_code_preview', 'qr_code_actions', 'recharge_button'
    )
    readonly_fields = ('qr_code_preview', 'photo_preview')

    def masked_pin(self, obj):
        return "****"
    masked_pin.short_description = 'PIN'

    def photo_preview(self, obj):
        if obj.photo:
            return format_html('<img src="{}" style="height: 80px;" />', obj.photo.url)
        return "No Photo"

    def qr_code_preview(self, obj):
        if obj.qr_code:
            return format_html('<img src="{}" width="100" height="100" />', obj.qr_code.url)
        return "No QR Code"
    qr_code_preview.short_description = 'QR Code Preview'

    def qr_code_actions(self, obj):
        if obj.qr_code:
            return format_html(
                '<a class="button" href="{}" target="_blank">Download QR</a>',
                f"/admin/Future/employee/download-qr/{obj.pk}/"
            )
        return "No QR"
    qr_code_actions.short_description = "QR Code"

    def recharge_button(self, obj):
        return format_html(
            '<a class="button" href="{}">Recharge</a>',
            f"/admin/Future/employee/recharge/{obj.pk}/"
        )
    recharge_button.short_description = "Recharge"
    recharge_button.allow_tags = True

    def get_urls(self):
        urls = super().get_urls()
        custom_urls = [
            path(
                'download-qr/<int:employee_id>/',
                self.admin_site.admin_view(self.download_qr),
                name="download_qr"
            ),
            path(
                'recharge/<int:employee_id>/',
                self.admin_site.admin_view(self.recharge_view),
                name='employee_recharge'
            ),
            path(
                'paymenthandler/<int:employee_id>/',
                self.admin_site.admin_view(self.payment_handler),
                name='payment_handler'
            ),
        ]
        return custom_urls + urls

    def download_qr(self, request, employee_id):
        employee = self.get_object(request, employee_id)
        if not employee or not employee.qr_code:
            return HttpResponse("QR Code not found.", status=404)

        file_path = employee.qr_code.path
        if not default_storage.exists(file_path):
            return HttpResponse("QR file missing.", status=404)

        with open(file_path, 'rb') as f:
            response = HttpResponse(f.read(), content_type="image/png")
            response['Content-Disposition'] = f'attachment; filename="{employee.name}_qr.png"'
            return response

    @method_decorator(csrf_exempt, name='dispatch')
    def recharge_view(self, request, employee_id):
        employee = get_object_or_404(Employee, pk=employee_id)

        if request.method == "GET":
            form = AmountForm()
            return render(request, 'admin/recharge_form.html', {'form': form, 'employee': employee})

        elif request.method == "POST":
            form = AmountForm(request.POST)
            if not form.is_valid():
                return render(request, 'admin/recharge_form.html', {'form': form, 'employee': employee})

            amount_in_rupees = form.cleaned_data['amount']
            amount_in_paise = int(amount_in_rupees * 100)

            client = razorpay.Client(auth=(settings.RAZORPAY_KEY_ID, settings.RAZORPAY_KEY_SECRET))
            razorpay_order = client.order.create({
                "amount": amount_in_paise,
                "currency": "INR",
                "payment_capture": "1"
            })

            context = {
                'employee': employee,
                'razorpay_order_id': razorpay_order['id'],
                'razorpay_merchant_key': settings.RAZORPAY_KEY_ID,
                'amount': amount_in_paise,
                'currency': 'INR',
                'callback_url': f'/admin/Future/employee/paymenthandler/{employee.id}/'
            }
            return render(request, 'admin/razorpay_payment.html', context)

    @method_decorator(csrf_exempt, name='dispatch')
    def payment_handler(self, request, employee_id):
        if request.method == "POST":
            data = json.loads(request.body)
            client = razorpay.Client(auth=(settings.RAZORPAY_KEY_ID, settings.RAZORPAY_KEY_SECRET))

            params_dict = {
                'razorpay_order_id': data.get('razorpay_order_id'),
                'razorpay_payment_id': data.get('razorpay_payment_id'),
                'razorpay_signature': data.get('razorpay_signature')
            }

            employee = get_object_or_404(Employee, pk=employee_id)

            try:
                client.utility.verify_payment_signature(params_dict)
                status = "SUCCESS"
            except razorpay.errors.SignatureVerificationError:
                status = "FAILED"

            order_info = client.order.fetch(data.get('razorpay_order_id'))
            amount_in_paise = order_info.get('amount') if order_info else 0
            amount_in_rupees = amount_in_paise / 100

            Payment.objects.create(
                employee=employee,
                razorpay_payment_id=data.get('razorpay_payment_id'),
                razorpay_order_id=data.get('razorpay_order_id'),
                razorpay_signature=data.get('razorpay_signature'),
                amount=amount_in_rupees,
                status=status
            )

            if status == "FAILED":
                return JsonResponse({'message': 'Payment verification failed!'}, status=400)
            else:
                return JsonResponse({'message': 'Payment successful and recorded!'})

        return JsonResponse({'message': 'Invalid request method'}, status=405)
my admin.py

<!DOCTYPE html>
<html>
<head>
    <title>Recharge Wallet - {{ employee.name }}</title>
</head>
<body>
    <h2>Recharge Wallet for {{ employee.name }}</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Pay</button>
    </form>
</body>
</html>
recharge_form.html

<!DOCTYPE html>
<html>
<head>
  <title>Recharge Wallet - {{ employee.name }}</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
  <h3>Opening Razorpay payment for {{ employee.name }}...</h3>

  <script>
    var options = {
      "key": "{{ razorpay_merchant_key }}",
      "amount": "{{ amount }}",
      "currency": "{{ currency }}",
      "name": "Your Company Name",
      "description": "Wallet Recharge",
      "order_id": "{{ razorpay_order_id }}",
      "handler": function (response){
          // POST payment details to server to save record
          fetch("{{ callback_url }}", {
              method: "POST",
              headers: {
                  'Content-Type': 'application/json',
                  'X-CSRFToken': '{{ csrf_token }}'
              },
              body: JSON.stringify(response)
          }).then(res => res.json())
            .then(data => {
              alert(data.message);
              window.location.href = "/admin/Future/payment/";  // Redirect to payments list
            }).catch(err => alert("Payment failed: " + err));
      },
      "modal": {
        "ondismiss": function(){
          window.location.href = "/admin/Future/employee/";
        }
      },
      "prefill": {
          "name": "{{ employee.name }}",
          "email": "{{ employee.email }}"
      },
      "theme": {
          "color": "#3399cc"
      }
    };
    var rzp1 = new Razorpay(options);
    rzp1.open();
  </script>
</body>
</html>
razorpay_payment.html 

check these code for that errors bro